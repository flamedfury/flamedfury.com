---
title: Automate 301 Redirects In 11ty
description: How to automate 301 redirects in .htaccess using 11ty on Apache
tags:
  - eleventy
  - development
date: 2024-06-21
timestamp: 2024-06-21T08:50:24.563Z
---

What's up Internet? Since moving Flamed Fury to a [shared hosting](/posts/deploying-an-11ty-project-to-shared-hosting/) plan I've wanted to provide more simple guides that aren't aimed at platforms like Netlify, Vercel, CloudFlare, or Github. 

I've previously posted about [redirects on Neocities](/posts/a-simple-guide-to-redirects-on-neocities-with-eleventy/) which is still valid, but am excited to be able to use 301 redirects again.

So, if you're worried that your current VC funded platform of choice is going to sting your with a crazy stupid invoice and have taken up a simple shared hosting plan or running your own VPS with Apache, then this will be useful for you.

[Aleksandr Hovhannisyan](https://www.aleksandrhovhannisyan.com/) has shared how to do this for [Netlify and 11ty](https://www.aleksandrhovhannisyan.com/blog/eleventy-netlify-redirects/) and also provided a [plugin](https://github.com/AleksandrHovhannisyan/eleventy-plugin-netlify-redirects) and we can jack his formatting for doing this with an .htaccess so if you ever end up moving from Netlify, your redirects will be easy to keep in place.

A 301 redirect in `.htaccess` simply looks like this:

```bash
Redirect 301 /old-url /new-url/
```

To automate this in 11ty we can follow Aleksandr's front matter `redirectFrom` key for a single url:

```yaml
---
redirectFrom: /posts/old-url/
---
```

Or use an array for multiple url's:
```yaml
---
redirectFrom: ['/posts/old-url', '/posts/old-url-2/']
---
```

Then you just need to create an `htaccess.njk` page, or use the same one that you previously created to [block bots](/posts/blocking-bots-with-11ty-and-apache/) with:

```jinja2
---
permalink: /.htaccess
eleventyExcludeFromCollections: true
excludeFromSitemap: true
---
{%- raw %}
##
# Automatically generated by {{ eleventy.generator }}
{% endraw %}
```

Then create a Nunjucks loop to iterate through all your pages:

```jinja2
---
permalink: /.htaccess
eleventyExcludeFromCollections: true
excludeFromSitemap: true
---
{%- raw %}
##
# Automatically generated by {{ eleventy.generator }}
{% endraw %}

{%- raw %}
# Redirects
{%- for page in collections.all %}
  {%- if page.data.redirectFrom %}
    {%- for redirect in page.data.redirectFrom %}
Redirect 301 {{ redirect }} {{ page.url }}
    {%- endfor %}
  {%- endif %}
{%- endfor %}
{% endraw %}
```

And that's all you need to do. You don't need those platforms to do cool things like this. Too easy!